var loadAjax=false;var offset_scroll;var update_products;var offset_top;
if($('.product-filter').length){offset_top='.product-filter';} else if($('.pagination').length) {offset_top='.pagination';} else {offset_top='#content';}
if(offset_scroll==null)offset_scroll=-10;window.addEventListener('popstate',function(e){if(e.state!==null){$('html, body').animate({scrollTop:$(offset_top).offset().top+offset_scroll},500);get_pagination(e.state.url);}},false);
$(document).on('click','.pagination a',function(){if(!loadAjax){var url=$(this).attr("href");if(url!=null){loadAjax=true;var state={title:"pagination",url:url};if(window.history && history.pushState){history.pushState(state,state.title,state.url);}get_pagination(url);}else{loadAjax=false;}return false;}});
function direct_pagination(href){if(!loadAjax){url=href;if(url!=null){loadAjax=true;var state={title:"pagination",url:url};if(window.history && history.pushState){history.pushState(state,state.title,state.url);}get_pagination(url);}else{loadAjax=false;}return false;}}
function get_pagination(href){$('.mainloader').show();$.ajaxPrefilter(function(options,originalOptions,jqXHR){options.async=true;});$.get(href,function(data){if(data){$('.content_wrapper').html(data);$('title').text($('.refresh_title').val());$('html, body').animate({scrollTop:$(offset_top).offset().top+offset_scroll},500);$('.mainloader').hide();
if(update_products==1){if($.browser.msie || $.browser.mozilla) $('.showselect').css('display','inline-block');$(document).ready(function(){function trysplit() {try {$(".p0").each(function(n, elem){chpr(elem, 0)});} catch(e){window.location.replace(window.location);}}trysplit ();
$('.variants').on('change','.p0', function(){chpr(this, 0)});$('.variants').on('change','.p1', function(){chpr(this, 1)});})}}else{window.location.reload();}loadAjax=false;}).fail(function(){$('.mainloader').hide();loadAjax = false;});}
